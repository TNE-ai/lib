---
# https://docs.github.com/en/actions/guides/building-and-testing-python
name: Base Lint

on:
  push:
    - main
    - master
  pull_request:

jobs:

  base:
    #runs-on: ubuntu-latest
    runs-on: ubuntu-20.04

    steps:
      # checkout repo under $GITHUB_WORKSPACE
      - name: Checkout action
        uses: actions/checkout@v2
        with:
          lfs: true
          #submodules should be tested one at a time
          #submodules: recursive

      # https://snapcraft.io/install/shfmt/ubuntu
      - name: Install ubuntu dependencies for shfmt and mdl
        run: |
          sudo apt update
          sudo apt install snapd
          sudo snap install shfmt mdl

      # Not needed there is a snap package
      # install dependencies for ruby gem mdl
      # https://github.com/ruby/setup-ruby
      #- name: Install ruby
        #uses: ruby/setup-ruby@v1
        #with:
          #ruby-version: 3.0
      #- name: Install Gems
        #run: |
          #gem install mdl

      # install dependencies for markdownlint-cli
      - name: Install node
        uses: actions/setup-node@v2
        with:
          node-version: '14'
      - name: Install markdownlint-cli
        run: npm install -g markdownlint-cli


      # https://github.com/pre-commit/action
      - name: Run Pre-commit
        uses: pre-commit/action@v2.0.0
